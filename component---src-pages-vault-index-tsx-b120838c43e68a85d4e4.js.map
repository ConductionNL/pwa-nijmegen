{"version":3,"file":"component---src-pages-vault-index-tsx-b120838c43e68a85d4e4.js","mappings":"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","sources":["webpack://pwa/./src/components/common/actionMenu.tsx","webpack://pwa/./src/components/utility/DocumentDownload.tsx","webpack://pwa/./src/components/vault/waardepapieren.tsx","webpack://pwa/./src/pages/vault/index.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {ActionMenu, BreakpointActionMenu} from \"@conductionnl/nl-design-system/lib/ActionMenu/src/actionMenu\";\n\nexport function MainActionMenu() {\n  return (\n    <ActionMenu\n      items={[{ name: 'Diensten', icon: 'fas fa-shopping-cart', link: '/products' }, { name: 'Mijn aanvragen', icon: 'fas fa-list-alt', link: '/cases' }, { name: 'Mijn gegevens', icon: 'fas fa-id-card-alt', link: '/data' }, { name: 'Mijn kluis', icon: 'fas fa-lock', link: '/vault' }]}\n      breakpoint={BreakpointActionMenu.mobile}\n    />\n  );\n}\n","export function documentDownload(\n  base64: string,\n  filename: string,\n  extension: string\n) {\n  const element = document.createElement(\"a\");\n  element.setAttribute(\"href\", base64);\n  element.setAttribute(\"download\", filename + extension);\n\n  element.style.display = \"none\";\n  document.body.appendChild(element);\n\n  element.click();\n\n  document.body.removeChild(element);\n}\n","import * as React from \"react\";\nimport {\n  SelectInputComponent,\n  WaardepapierenTable,\n} from \"@conductionnl/nl-design-system\";\nimport {documentDownload} from \"../utility/DocumentDownload\";\nimport Modal from \"@conductionnl/nl-design-system/lib/Modal/src/modal\";\nimport {getUser, isLoggedIn} from \"../../services/auth\";\nimport {navigate} from \"gatsby-link\";\n\nexport default function Waardepapieren() {\n  const [context, setContext] = React.useState(null);\n\n  React.useEffect(() => {\n    if (typeof window !== \"undefined\" && context === null) {\n      setContext({\n        apiUrl: window.GATSBY_API_URL,\n        frontendUrl: window.GATSBY_FRONTEND_URL,\n        organizationUrl: window.GATSBY_ORGANIZATION,\n        waardepapierenPaymentRequired: window.WAARDEPAPIEREN_PAYMENT_REQUIRED,\n      });\n    } else {\n      if (isLoggedIn()) {\n        fetch(\n          `${context.apiUrl}/gateways/waardepapieren-register/certificates?person=${getUser().username}`,\n          {\n            credentials: \"include\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n          }\n        )\n          .then((response) => response.json())\n          .then((data) => {\n            setWaardepapieren(data[\"hydra:member\"]);\n          });\n      }\n    }\n  }, [context]);\n\n  const refreshTable = () => {\n    setWaardepapieren(null);\n    fetch(\n      `${context.apiUrl}/gateways/waardepapieren-register/certificates?person=${getUser().username}`,\n      {\n        credentials: 'include',\n        headers: {'Content-Type': 'application/json'},\n      })\n      .then(response => response.json())\n      .then((data) => {\n        setWaardepapieren(data['hydra:member']);\n      });\n  }\n\n  const [waardepapieren, setWaardepapieren] = React.useState(null);\n\n  const options = [\n    {\n      name: \"Akte van geboorte\",\n      value: \"akte_van_geboorte\",\n    },\n    {\n      name: \"Verklaring van in leven zijn\",\n      value: \"verklaring_van_in_leven_zijn\",\n    },\n    {\n      name: \"Uitreksel basis registratie personen\",\n      value: \"uitreksel_basis_registratie_personen\",\n    },\n  ];\n\n  const handleCertificate = (event) => {\n    event.preventDefault();\n    const type = event.target.waardepapier.value;\n\n    let price = null;\n\n    switch (type) {\n      case \"akte_van_geboorte\":\n        price = 1400;\n        break;\n      case \"verklaring_van_in_leven_zijn\":\n        price = 1400;\n        break;\n      case \"uitreksel_basis_registratie_personen\":\n        break;\n      default:\n        price = null;\n        break;\n    }\n\n    if (price === null) {\n      return;\n    }\n\n    const body = {\n      organization: context.organizationUrl,\n      price: price,\n      type: type,\n      person: getUser().id,\n      name: getUser().name,\n      ingenicoUrl: `${context.frontendUrl}/pay-certificate`,\n    };\n\n    if (context.waardepapierenPaymentRequired) {\n      fetch(`${context.apiUrl}/gateways/waardepapieren-service/payments`, {\n        credentials: \"include\",\n        method: \"POST\",\n        body: JSON.stringify(body),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          if (typeof window !== \"undefined\") {\n            window.sessionStorage.setItem(\"payment\", JSON.stringify(data));\n            navigate(\"/pay-certificate\");\n          }\n        });\n    } else {\n      fetch(`${context.apiUrl}/gateways/waardepapieren-service/certificates`, {\n        credentials: \"include\",\n        method: \"POST\",\n        body: JSON.stringify(body),\n        headers: {'Content-Type': 'application/json'},\n      })\n        .then((response) => {\n          if (response.ok) {\n            refreshTable();\n            navigate(\"/vault\");\n            return response.json();\n          } else {\n            throw new Error('Something went wrong');\n          }\n        })\n        .then((data) => {\n          if (typeof window !== \"undefined\") {\n          }\n        });\n    }\n  };\n\n  return (\n    <>\n      <div>\n        <div style={{textAlign: \"right\"}}>\n          <button type=\"button\" className=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#claims\">\n            Claims\n          </button>\n        </div>\n        <Modal title={\"Claims\"}\n               id={\"claims\"}\n               body={function () {\n                 return (\n                   <form onSubmit={handleCertificate} className={\"mb-4\"}>\n                     <div className=\"row\">\n                       <div className=\"col-12\">\n                         <SelectInputComponent\n                           required={true}\n                           options={options}\n                           name={\"waardepapier\"}\n                           nameOverride={\"Type Claim\"}\n                           id={\"waardepapieren\"}\n                         />\n                       </div>\n                       <br/>\n                       <div className=\"col-12\">\n                         <button data-bs-dismiss=\"modal\" className={\"utrecht-button\"}>Aanvragen</button>\n                       </div>\n                     </div>\n                   </form>\n                 )\n               }}/>\n      </div>\n      {waardepapieren !== null ? (\n        <WaardepapierenTable\n          rows={waardepapieren}\n          fileFunction={documentDownload}\n        />\n      ) : (\n        <WaardepapierenTable\n          rows={[]}\n          fileFunction={documentDownload}\n        />\n      )\n      }\n    </>\n  );\n}\n","import {\n  BottomNavigation,\n  BreakpointBottomNavigation\n} from \"@conductionnl/nl-design-system/lib/BottomNavigation/src/bottomNavigation\";\nimport * as React from \"react\";\nimport Layout from \"../../components/common/layout\";\nimport {MainActionMenu} from \"../../components/common/actionMenu\";\nimport Waardepapieren from \"../../components/vault/waardepapieren\";\nimport {Breadcrumbs} from \"@conductionnl/nl-design-system/lib/Breadcrumbs/src/breadcrumbs\";\n\nconst Index = () => {\n  return (\n    <Layout>\n      <main>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-2\">\n              <MainActionMenu />\n              <BottomNavigation\n                items={[{name: 'Diensten', icon: 'fas fa-shopping-cart', link: '/index'}, {\n                  name: 'Mijn aanvragen',\n                  icon: 'fas fa-list-alt',\n                  link: ''\n                }, {name: 'Mijn gegevens', icon: 'fas fa-id-card-alt', link: ''}, {\n                  name: 'Mijn kluis',\n                  icon: 'fas fa-lock',\n                  link: ''\n                }]}\n                breakpoint={BreakpointBottomNavigation.mobile}\n              />\n            </div>\n            <div className=\"col-10\">\n              <Breadcrumbs items={[{render: function () {return \"Home\";}, name: \"home\", link: \"/index\"}, {render: function () {return \"Mijn kluis\";}, name: \"vault\", link: \"/vault\"}]} />\n              <h4 className=\"utrecht-heading-1\">Mijn kluis</h4>\n              <br/>\n              <>\n                <Waardepapieren />\n              </>\n            </div>\n          </div>\n        </div>\n      </main>\n    </Layout>\n  );\n};\n\nexport default Index;\n"],"names":["MainActionMenu","ActionMenu","items","name","icon","link","breakpoint","BreakpointActionMenu","documentDownload","base64","filename","extension","element","document","createElement","setAttribute","style","display","body","appendChild","click","removeChild","Waardepapieren","React","context","setContext","window","apiUrl","GATSBY_API_URL","frontendUrl","GATSBY_FRONTEND_URL","organizationUrl","GATSBY_ORGANIZATION","waardepapierenPaymentRequired","WAARDEPAPIEREN_PAYMENT_REQUIRED","isLoggedIn","fetch","getUser","username","credentials","headers","then","response","json","data","setWaardepapieren","waardepapieren","options","value","handleCertificate","event","preventDefault","type","target","waardepapier","price","organization","person","id","ingenicoUrl","method","JSON","stringify","sessionStorage","setItem","navigate","ok","Error","textAlign","className","title","onSubmit","SelectInputComponent","required","nameOverride","WaardepapierenTable","rows","fileFunction","BottomNavigation","BreakpointBottomNavigation","Breadcrumbs","render"],"sourceRoot":""}